'use strict';

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface, Sequelize) {
    const now = new Date();
    const thirtyMinutesAgo = new Date(now.getTime() - 30 * 60 * 1000);
    const oneHourAgo = new Date(now.getTime() - 60 * 60 * 1000);
    const twoHoursAgo = new Date(now.getTime() - 2 * 60 * 60 * 1000);
    const threeHoursAgo = new Date(now.getTime() - 3 * 60 * 60 * 1000);
    const oneDayAgo = new Date(now.getTime() - 24 * 60 * 60 * 1000);
    const twoDaysAgo = new Date(now.getTime() - 2 * 24 * 60 * 60 * 1000);

    await queryInterface.bulkInsert('posts', [
      // ==========================================
      // POSTS HRP
      // ==========================================

      // Post 1: Premier post du topic 1 (Annonce admin)
      {
        id: 1,
        content: 'Bienvenue √† tous dans cette phase de test d\'√ârosion des √Çmes !\n\nNous sommes ravis de vous accueillir dans ce monde post-apocalyptique o√π deux factions s\'affrontent pour leur survie. Cette phase de test nous permettra de :\n\n- Tester les fonctionnalit√©s du forum\n- V√©rifier le syst√®me de permissions\n- Recueillir vos retours pour am√©liorer l\'exp√©rience de jeu\n\nN\'h√©sitez pas √† explorer toutes les sections, cr√©er vos personnages et participer aux discussions !\n\nBon jeu √† tous !',
        topic_id: 1, // Ouverture de la phase de test
        author_user_id: 1, // admin
        author_character_id: null,
        author_name: 'admin',
        is_locked: false,
        created_at: twoDaysAgo,
        updated_at: twoDaysAgo,
        deleted_at: null
      },

      // Post 2: R√©ponse au topic 1 par moderator
      {
        id: 2,
        content: 'Super ! H√¢te de voir ce que tout le monde va cr√©er comme histoires. Le syst√®me de factions a l\'air vraiment int√©ressant.',
        topic_id: 1,
        author_user_id: 2, // moderator
        author_character_id: null,
        author_name: 'moderator',
        is_locked: false,
        created_at: oneDayAgo,
        updated_at: oneDayAgo,
        deleted_at: null
      },

      // Post 3: Premier post du topic 2 (Suggestion moderator)
      {
        id: 3,
        content: 'Salut √† tous !\n\nJe me demandais si on pourrait avoir un syst√®me de commerce entre joueurs. √áa pourrait √™tre int√©ressant pour :\n\n1. √âchanger des ressources entre personnages\n2. Cr√©er des personnages marchands\n3. D√©velopper des interactions RP autour du commerce\n\nQu\'en pensez-vous ? Est-ce que √ßa cadrerait bien avec l\'univers du jeu ?',
        topic_id: 2, // Id√©e : Syst√®me de commerce
        author_user_id: 2, // moderator
        author_character_id: null,
        author_name: 'moderator',
        is_locked: false,
        created_at: oneDayAgo,
        updated_at: oneDayAgo,
        deleted_at: null
      },

      // Post 4: R√©ponse au topic 2 par game-master
      {
        id: 4,
        content: 'Excellente id√©e ! Les Vagabonds du Vent pourraient jouer un r√¥le important dans ce syst√®me. Je note √ßa pour les futures am√©liorations.',
        topic_id: 2,
        author_user_id: 3, // game-master
        author_character_id: null,
        author_name: 'game-master',
        is_locked: false,
        created_at: oneHourAgo,
        updated_at: oneHourAgo,
        deleted_at: null
      },

      // Posts 5-7: Pr√©sentations dans le topic 3 (Campement de R√©fugi√©s)
      // Post du cr√©ateur du topic
      {
        id: 5,
        content: 'Salut tout le monde !\n\nJe m\'appelle PJ-eclaireur et je viens de rejoindre √ârosion des √Çmes. J\'ai cr√©√© un personnage √âveill√©, Kael l\'√âveill√©, qui vient d\'arriver √† l\'Oasis des Transform√©s.\n\nJ\'ai h√¢te de d√©couvrir l\'univers et de jouer avec vous tous !',
        topic_id: 3, // Pr√©sentation de PJ-eclaireur
        author_user_id: 4, // PJ-eclaireur
        author_character_id: null,
        author_name: 'PJ-eclaireur',
        is_locked: false,
        created_at: oneHourAgo,
        updated_at: oneHourAgo,
        deleted_at: null
      },

      // R√©ponse de PJ-veilleur
      {
        id: 6,
        content: 'Bienvenue ! Moi c\'est PJ-veilleur, j\'ai cr√©√© Elena la Pure chez les Veilleurs. On est adversaires en RP mais on peut quand m√™me discuter ici ! üòä',
        topic_id: 3,
        author_user_id: 5, // PJ-veilleur
        author_character_id: null,
        author_name: 'PJ-veilleur',
        is_locked: false,
        created_at: thirtyMinutesAgo,
        updated_at: thirtyMinutesAgo,
        deleted_at: null
      },

      // R√©ponse de PJ-symbiote
      {
        id: 7,
        content: 'Bienvenue parmi les √âveill√©s ! Si tu as besoin de conseils pour choisir ton clan, n\'h√©site pas. Moi j\'ai rejoint les Symbiotes et c\'est passionnant !',
        topic_id: 3,
        author_user_id: 7, // PJ-symbiote
        author_character_id: null,
        author_name: 'PJ-symbiote',
        is_locked: false,
        created_at: now,
        updated_at: now,
        deleted_at: null
      },

      // ==========================================
      // POSTS RP
      // ==========================================

      // Posts du topic 4 (Rassemblement des √âveill√©s - priv√© √âclaireurs)
      // Post initial par Kael l'√âveill√©
      {
        id: 8,
        content: '*S\'avance lentement vers la place centrale, observant les autres √âveill√©s rassembl√©s*\n\nFr√®res et s≈ìurs de la mutation... Je suis Kael, nouvellement arriv√© √† l\'Oasis. J\'ai entendu parler de votre cause et je souhaite comprendre comment je pourrais servir notre peuple.\n\n*Regarde autour de lui avec curiosit√©*\n\nQuelqu\'un pourrait-il m\'expliquer les r√¥les des diff√©rentes castes ?',
        topic_id: 4, // [RP] Rassemblement des √âveill√©s
        author_user_id: null,
        author_character_id: 1, // Kael l'√âveill√©
        author_name: 'Kael l\'√âveill√©',
        is_locked: false,
        created_at: twoHoursAgo,
        updated_at: twoHoursAgo,
        deleted_at: null
      },

      // R√©ponse par Lyra la Cultivatrice
      {
        id: 9,
        content: '*Sourit chaleureusement et s\'approche de Kael*\n\nBienvenue, jeune √âveill√©. Je suis Lyra, membre de la Caste des Symbiotes. Nous travaillons avec la nature mut√©e pour nourrir notre peuple et adapter notre Oasis √† ce nouveau monde.\n\n*Montre les jardins luxuriants autour d\'eux*\n\nChaque caste a son importance. Les Sensitifs explorent les terres, les Forgerons de Chair nous soignent, les Sentinelles du Chaos nous prot√®gent, et les Scrutateurs √©tudient les ruines de l\'Ancien Monde.\n\nQu\'est-ce qui t\'attire, Kael ?',
        topic_id: 4,
        author_user_id: null,
        author_character_id: 4, // Lyra la Cultivatrice
        author_name: 'Lyra la Cultivatrice',
        is_locked: false,
        created_at: oneHourAgo,
        updated_at: oneHourAgo,
        deleted_at: null
      },

      // Posts du topic 5 (Patrouille nocturne - priv√© Veilleurs)
      // Post initial par Marcus le Protecteur
      {
        id: 10,
        content: '*Se tient droit dans le Hall Principal, armure impeccable*\n\nSentinelles, le rapport de la patrouille de cette nuit est troublant. Des traces de mutants ont √©t√© rep√©r√©es pr√®s du secteur nord de la Citadelle.\n\n*D√©ploie une carte sur la table*\n\nNous devons renforcer la surveillance. Je demande trois volontaires pour une patrouille renforc√©e √† l\'aube. Qui se porte volontaire ?',
        topic_id: 5, // [RP] Patrouille nocturne
        author_user_id: null,
        author_character_id: 5, // Marcus le Protecteur
        author_name: 'Marcus le Protecteur',
        is_locked: false,
        created_at: oneHourAgo,
        updated_at: oneHourAgo,
        deleted_at: null
      },

      // R√©ponse par Elena la Pure
      {
        id: 11,
        content: '*S\'avance et salue respectueusement*\n\nCommandant Marcus, je me porte volontaire. M√™me si je suis nouvelle, je sais manier l\'arc et je connais les protocoles de patrouille.\n\n*Pose la main sur son carquois*\n\nJe ne laisserai aucun mutant menacer notre Citadelle.',
        topic_id: 5,
        author_user_id: null,
        author_character_id: 2, // Elena la Pure
        author_name: 'Elena la Pure',
        is_locked: false,
        created_at: thirtyMinutesAgo,
        updated_at: thirtyMinutesAgo,
        deleted_at: null
      },

      // Posts du topic 6 (Caravane dans le d√©sert - public)
      // Post initial par Zara la Marcheuse
      {
        id: 12,
        content: '*Arr√™te sa caravane pr√®s d\'un point d\'eau ass√©ch√©*\n\nEncre une journ√©e de marche √† travers ces terres maudites... Mais les Vagabonds du Vent ne s\'arr√™tent jamais.\n\n*Sort des marchandises de ses sacoches*\n\nJ\'ai des nouvelles des deux factions, des vivres, et quelques objets int√©ressants √† √©changer. Que quelqu\'un m\'entende ou non, je continuerai ma route demain √† l\'aube.\n\n*S\'assoit pr√®s d\'un feu de camp improvis√©*\n\nCe monde est hostile, mais il y a encore des gens qui ont besoin de commerce et d\'information.',
        topic_id: 6, // [RP] Une caravane dans le d√©sert
        author_user_id: null,
        author_character_id: 6, // Zara la Marcheuse
        author_name: 'Zara la Marcheuse',
        is_locked: false,
        created_at: oneDayAgo,
        updated_at: oneDayAgo,
        deleted_at: null
      },

      // R√©ponse par Ash le Solitaire
      {
        id: 13,
        content: '*√âmerge de l\'ombre d\'un rocher, capuche rabattue*\n\nMarchande. Je t\'ai suivie depuis le dernier campement.\n\n*S\'approche lentement, mains visibles*\n\nPas d\'inqui√©tude, je ne suis pas hostile. J\'ai besoin d\'informations sur les mouvements des √âclaireurs dans la r√©gion ouest. Et j\'ai de quoi payer.\n\n*Montre une bourse en cuir*\n\nQu\'as-tu entendu ?',
        topic_id: 6,
        author_user_id: null,
        author_character_id: 3, // Ash le Solitaire
        author_name: 'Ash le Solitaire',
        is_locked: false,
        created_at: oneHourAgo,
        updated_at: oneHourAgo,
        deleted_at: null
      },

      // Posts du topic 7 (Arriv√©e d'un √©tranger - public)
      // Post initial par Ash le Solitaire
      {
        id: 14,
        content: '*S\'arr√™te devant l\'entr√©e de l\'Oasis, observant les gardes*\n\nJe cherche refuge pour la nuit. Je ne suis pas membre de votre faction, mais je ne suis pas une menace non plus.\n\n*√âcarte lentement les mains, montrant qu\'il n\'est pas arm√©*\n\nJe suis un √âveill√©, comme vous. Mais je pr√©f√®re rester libre plut√¥t que de choisir un camp dans cette guerre absurde.\n\n*Regarde vers l\'horizon*\n\nUne nuit √† l\'abri, c\'est tout ce que je demande. Je repartirai √† l\'aube.',
        topic_id: 7, // [RP] Arriv√©e d'un √©tranger
        author_user_id: null,
        author_character_id: 3, // Ash le Solitaire
        author_name: 'Ash le Solitaire',
        is_locked: false,
        created_at: twoHoursAgo,
        updated_at: twoHoursAgo,
        deleted_at: null
      },

      // R√©ponse par Kael l'√âveill√©
      {
        id: 15,
        content: '*Sort de l\'Oasis et observe l\'√©tranger avec curiosit√©*\n\nUn √âveill√© neutre ? C\'est rare de nos jours...\n\n*Se tourne vers l\'int√©rieur de l\'Oasis*\n\nJe ne suis pas garde, mais je peux aller chercher quelqu\'un qui pourra d√©cider. Tu dis vouloir rester neutre, mais dans ce monde, peut-on vraiment se le permettre ?\n\n*Croise les bras, attendant une r√©ponse*',
        topic_id: 7,
        author_user_id: null,
        author_character_id: 1, // Kael l'√âveill√©
        author_name: 'Kael l\'√âveill√©',
        is_locked: false,
        created_at: now,
        updated_at: now,
        deleted_at: null
      }
    ], {});
  },

  async down(queryInterface, Sequelize) {
    await queryInterface.bulkDelete('posts', null, {});
  }
};
